# Realm 密码管理器开发计划

## 概述

根据 `docs` 目录下的设计稿，实现一个完整的密码管理器应用。前端使用 React + Tailwind CSS 实现所有界面和交互逻辑，后端 Go 实现空接口供前后端通信。

## 技术栈

- **前端**: React 18 + TypeScript + Tailwind CSS + Material Symbols
- **路由**: react-router-dom
- **后端**: Go 1.23.1 + Wails v2
- **样式**: Tailwind CSS（通过 CDN 或配置）

## 项目结构

```
frontend/src/
├── components/          # 公共组件
│   ├── Layout.tsx      # 布局组件
│   └── ...
├── pages/              # 页面组件
│   ├── Login.tsx       # 登录页面 (docs/01login)
│   ├── Main.tsx        # 主界面 (docs/02main)
│   ├── AddPassword.tsx # 添加密码页面 (docs/03add)
│   └── Settings.tsx    # 设置页面 (docs/04settings)
├── hooks/              # 自定义 Hooks
│   └── useAuth.ts      # 认证状态管理
├── types/              # TypeScript 类型定义
│   └── index.ts
├── App.tsx             # 主应用组件（路由配置）
└── main.tsx
```

## 实现步骤

### 1. 安装和配置依赖

**前端依赖**:

- `react-router-dom`: 路由管理
- `tailwindcss`: CSS 框架（通过配置或 CDN）
- Material Symbols 图标（通过 CDN）

**配置文件**:

- 配置 `tailwind.config.js` 或通过 CDN 引入 Tailwind CSS
- 更新 `vite.config.ts` 支持 Tailwind
- 更新 `package.json` 添加依赖

### 2. 后端接口实现 ([app.go](app.go))

在 `app.go` 中实现空接口：

```go
// Login 登录接口（空实现）
func (a *App) Login(username string, password string) (bool, error)

// GetPasswordCategories 获取密码分类列表（空实现）
func (a *App) GetPasswordCategories() ([]Category, error)

// GetPasswordsByCategory 根据分类获取密码列表（空实现）
func (a *App) GetPasswordsByCategory(category string) ([]Password, error)

// AddPassword 添加密码（空实现）
func (a *App) AddPassword(password Password) (bool, error)

// GetSettings 获取设置（空实现）
func (a *App) GetSettings() (Settings, error)

// UpdateSettings 更新设置（空实现）
func (a *App) UpdateSettings(settings Settings) (bool, error)
```

定义数据结构：

```go
type Category struct {
    Name  string `json:"name"`
    Icon  string `json:"icon"`
    Color string `json:"color"`
}

type Password struct {
    ID       string `json:"id"`
    Name     string `json:"name"`
    Url      string `json:"url"`
    Username string `json:"username"`
    Password string `json:"password"`
    Category string `json:"category"`
    Priority string `json:"priority"`
}

type Settings struct {
    Language string `json:"language"` // "zh" | "en"
    Theme    string `json:"theme"`    // "light" | "dark"
}
```

### 3. 前端路由配置 ([frontend/src/App.tsx](frontend/src/App.tsx))

使用 `react-router-dom` 配置路由：

- `/login`: 登录页面
- `/main`: 主界面
- `/add`: 添加密码页面
- `/settings`: 设置页面

### 4. 实现登录页面 ([frontend/src/pages/Login.tsx](frontend/src/pages/Login.tsx))

**功能**:

- 用户输入主密码
- 密码可见性切换
- 点击 "Unlock Vault" 按钮调用后端 `Login` 接口
- 登录成功后跳转到主界面

**设计要点** (参考 docs/01login):

- 使用玻璃态卡片样式（glass-card）
- 渐变背景 blob 效果
- 深色模式支持
- 语言切换（EN/CN）和主题切换按钮

### 5. 实现主界面 ([frontend/src/pages/Main.tsx](frontend/src/pages/Main.tsx))

**功能**:

- 侧边栏显示密码分类（Dashboard、Financial、Social、Private、Work、Settings）
- 顶部搜索栏
- 密码卡片网格显示
- 分类切换标签页
- 每个密码卡片显示：图标、名称、网址、用户名、密码（隐藏）、优先级标签
- 密码显示/隐藏、复制功能
- "Add New" 按钮跳转到添加密码页面

**设计要点** (参考 docs/02main):

- 左侧固定侧边栏
- 顶部导航栏（搜索、Add New 按钮、通知、用户头像）
- 密码卡片网格布局（响应式）
- 不同分类使用不同颜色标识

### 6. 实现添加密码页面 ([frontend/src/pages/AddPassword.tsx](frontend/src/pages/AddPassword.tsx))

**功能**:

- 模态框形式显示
- 密码类型选择（Financial、Social、Private、Work）
- 表单字段：
  - Website Name（必填）
  - Website Link（可选）
  - Username or Email（必填）
  - Password（必填，带生成强密码按钮）
- 表单验证
- 提交调用后端 `AddPassword` 接口
- 成功后关闭模态框并刷新主界面

**设计要点** (参考 docs/03add):

- 模态框居中显示
- 玻璃态背景遮罩
- 密码类型单选按钮组
- 表单字段带图标

### 7. 实现设置页面 ([frontend/src/pages/Settings.tsx](frontend/src/pages/Settings.tsx))

**功能**:

- 语言偏好设置（中文/英文）
- 主题模式设置（Light/Dark）
- 设置保存调用后端 `UpdateSettings` 接口
- 实时应用主题和语言

**设计要点** (参考 docs/04settings):

- 左侧导航栏（与主界面一致）
- 设置卡片玻璃态样式
- 语言选择切换按钮
- 主题选择卡片式选择器（带预览）

### 8. 状态管理

**认证状态**:

- 使用 React Context 或 localStorage 管理登录状态
- 未登录自动跳转到登录页面

**主题和语言**:

- 使用 localStorage 持久化设置
- 全局状态管理（Context）

### 9. 样式配置

**Tailwind CSS 配置**:

- 配置自定义颜色（primary、background-light、background-dark等）
- 配置自定义圆角、字体
- 配置深色模式（class 策略）

**Material Symbols**:

- 通过 CDN 引入图标字体
- 在 HTML 中配置字体变体

### 10. 数据处理

**模拟数据**:

- 前端使用模拟数据展示（因为后端是空实现）
- 数据存储在组件状态或 Context 中

## 关键文件清单

1. **后端**:

   - [app.go](../app.go): 实现所有后端接口（空实现）

2. **前端核心**:

   - [frontend/src/App.tsx](../frontend/src/App.tsx): 路由配置
   - [frontend/src/pages/Login.tsx](../frontend/src/pages/Login.tsx): 登录页面
   - [frontend/src/pages/Main.tsx](../frontend/src/pages/Main.tsx): 主界面
   - [frontend/src/pages/AddPassword.tsx](../frontend/src/pages/AddPassword.tsx): 添加密码页面
   - [frontend/src/pages/Settings.tsx](../frontend/src/pages/Settings.tsx): 设置页面

3. **配置**:

   - [frontend/package.json](../frontend/package.json): 添加依赖
   - [frontend/index.html](../frontend/index.html): 引入 Tailwind CSS 和 Material Symbols

4. **样式**:

   - [frontend/src/style.css](../frontend/src/style.css): 全局样式
   - 各页面组件的内联样式或独立 CSS 文件

## 实现状态

### 已完成任务

- ✅ **安装和配置依赖**: react-router-dom、Tailwind CSS（CDN）、Material Symbols 图标
- ✅ **后端接口实现**: 所有空接口已实现（Login、GetPasswordCategories、GetPasswordsByCategory、AddPassword、GetSettings、UpdateSettings）
- ✅ **路由配置**: React Router 配置完成，包含路由守卫
- ✅ **登录页面**: 密码输入、可见性切换、登录逻辑和跳转功能
- ✅ **主界面**: 侧边栏、搜索栏、密码卡片网格、分类切换和交互功能
- ✅ **添加密码页面**: 模态框表单、密码类型选择、表单验证和提交逻辑
- ✅ **设置页面**: 语言选择、主题切换和设置保存功能
- ✅ **状态管理**: 全局状态管理（认证状态、主题、语言），使用 Context API 和 localStorage
- ✅ **样式完善**: 深色模式、响应式设计和动画效果

## 注意事项

1. **路由守卫**: 实现登录状态检查，未登录用户访问受保护页面时重定向到登录页
2. **响应式设计**: 确保所有界面在不同窗口尺寸下正常显示
3. **深色模式**: 实现完整的深色模式支持，包括动态切换
4. **表单验证**: 添加密码页面需要实现表单验证
5. **数据持久化**: 由于后端是空实现，前端可以使用 localStorage 模拟数据持久化
6. **图标**: 所有 Material Symbols 图标需要正确引入和使用

## 开发顺序

1. ✅ 配置 Tailwind CSS 和基础依赖
2. ✅ 实现后端空接口和数据结构
3. ✅ 实现路由系统
4. ✅ 实现登录页面
5. ✅ 实现主界面
6. ✅ 实现添加密码页面
7. ✅ 实现设置页面
8. ✅ 实现状态管理和路由守卫
9. ⏳ 测试和优化
